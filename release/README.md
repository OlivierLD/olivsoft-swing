# This will be your "working" directory

#### Note:
Starting with version 4.0.0.0 (April 2016), the automatic update has been _removed_.

The way to update your distribution is to use `git` and `gradle`.
The `git` repository becomes the single point of truth. This decision has been made after considering that
the bits generated by in the `all-libs` directory (looked up by the automatic update) were not
always in sync with the code repository.
From now on, it is the user's responsibility to keep his distribution in sync with the repo.
Welcome to the OpenSource world.

It is now the user's responsibility to update his software, with the sources contained in the code repository.

## How to proceed
Here is the way to build and use your own distribution, on Windows, Mac or Linux.

In the commands below, please look at the prompts; they will tell you what directory to work from.

### Generate the fat jar
Once your code is stable (in case you've modified the one in the git repository), go
to the `release` directory (the one you're in right now).
Mac and Linux come with the `bash` shell, and the `git bash shell` on Windows supports the same syntax.
In the commands below, the orientation of the slashes (`/`) is intentional, even on Windows.

Then (on Windows, in the git bash shell) run the following command:
```
 release> ../../gradlew --daemon shadowJar
```
This will generate a _fat_ jar in `build/libs`, named `release-4.0.0.0-all.jar`.
This jar contains pretty much _everything_ you need, including the **Maven** dependencies.

### Run the soft
_Note_: On Linux and Mac, make sure the scripts are executable:
```
 all-scripts> chmod +x olivsoft*
 all-scripts> find pub -name 'publish*' -exec chmod +x {} \;
```
#### On Windows
```
 release> .\olivsoft
```

#### On Mac
```
 all-scripts> ./olivsoft.mac
```

#### On Linux
```
 all-scripts> ./olivsoft
```
or (written for the Raspberry PI, with a small screen)
```
 all-scripts> ./olivsoft.small
```

##### About the Raspberry PI
The graphical interface might be a bit too demanding for the Raspberry Pi.
But the headless mode works _just fine_ on it.

## How to package and re-distribute
A way to do it would be to archive the whole `release` directory and unarchive it on the targeted machine.

On Windows, [`7zip`](http://www.7-zip.org/) works just fine.

On Mac and Linux, to archive, you can use
```
 release> tar -czvf olivsoft.tar.gz *
```

To unarchive on the target machine, assuming that you have copied the archive in the `/home/username` directory:
```
  /home/username> mkdir olivsoft
  /home/username> cd olivsoft
  olivsoft> tar -xzvf ../olivsoft.tar.gz
```

Then, the scripts to run are mentioned above.

### Big Warning
Do make sure you do a backup of your work (composites, config files, etc) before you pull or clone a new version of the code.
Whatever has not been saved could be lost.
